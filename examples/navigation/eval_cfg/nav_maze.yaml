env_class: navigation_env
env:
  num_envs: 20
  seed: 42
  visual: True
  single_env: True # 在评估时，我们通常在同一个场景下测试多次
  base_action: [0., 0., 0.]
  robot_radius: 0.25
  random_kwargs:
    safe_spawn_radius: 0.1
    min_starting_distance_to_target: 0.1
    
    # --- 核心设计：创建逻辑迷宫 ---
    # 1. 设置起点在一个角落
    position:
      class: uniform
      mean: [-7., 7., 1.5]  # 左上角区域
      half: [1., 1., 0.5]     # 在一个小的正方形区域内随机出生
      
    # 2. 设置目标在对角线的另一个角落
    target:
      class: uniform
      mean: [7., -7., 1.5] # 右下角区域
      half: [1., 1., 0.5]    # 也在一个小区域内
    # -------------------------

    velocity:
      class: uniform
      mean: [0., 0., 0.]
      half: [0.1, 0.1, 0.1]
    rotation:
      class: normal 
      mean: [0., 0., 0.]
      half: [0., 0., 3.14] # 初始朝向随机
    target_speed: 
      class: uniform
      mean: [3.]
      half: [2.]
    velocity_noise:
      class: normal
      mean: [0., 0., 0.]
      half: [0.05, 0.05, 0.05]
    rotation_noise:
      class: normal 
      mean: [0., 0., 0.]
      half: [0.02, 0.02, 0.02]
    gravity:
      class: normal
      mean: [0., 0., -9.81]
      half: [0., 0., 1.5]
      
  dynamics_kwargs:
    action_type: thrust_world_frame
    dt: 0.02
    ctrl_dt: 0.02
    ctrl_delay: 0.0
    grad_decay: 0.92
    avg_velocity_window_dt: 2.0
    exp_smoothing_factor: 12.
    enable_ctrl_smoothing: True
    enable_air_drag: False
    air_drag_theta_1: 0.1
    air_drag_theta_2: 0.1
    
  scene_kwargs:
    # 使用一个带墙的场景来创造绕行需求
    path: configs/wall_3
    reload_scenes: True
    load_geodesics: False
    spawn_obstacles: False
    
  sensor_kwargs:
    - sensor_type: depth
      uuid: depth
      resolution: [72, 128]
      position: [0.1, -0.02, -0.04]
      orientation: [0, 0, 0]
      far: 10.
      near: 0.05
      
  target_kwargs:
    success_radius: 1.0
    
  reward_kwargs:
    beta_1: 2.5
    beta_2: -6 
    lambda_v: 1
    lambda_c: 6 
    lambda_a: 0.01
    lambda_j: 0.001
    lambda_om: 0.3
    lambda_yaw: 1.0
    lambda_vmax: 1.0
    falloff_dis: 1.0
    
  max_episode_steps: 800 # 适当增加最大步数，因为路径更长
  device: cpu